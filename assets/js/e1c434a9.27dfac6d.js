"use strict";(self.webpackChunkpico_mazing=self.webpackChunkpico_mazing||[]).push([[767],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>b});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=o.createContext({}),u=function(e){var t=o.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),m=n,b=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return r?o.createElement(b,a(a({ref:t},p),{},{components:r})):o.createElement(b,a({ref:t},p))}));function b(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:n,a[1]=l;for(var u=2;u<i;u++)a[u]=r[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5913:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var o=r(7462),n=(r(7294),r(3905));const i={sidebar_position:2},a="Guide de d\xe9marrage rapide",l={unversionedId:"guide de demarrage",id:"guide de demarrage",title:"Guide de d\xe9marrage rapide",description:"Dans cette section nous nous attacherons \xe0 pr\xe9senter une marche \xe0 suivre afin de mettre en marche le Picobot. Pour suivre ce tutoriel, il faudra disposer d\u2019un ordinateur capable d\u2019installer ROS, nativement ou au travers d\u2019un conteneur.",source:"@site/docs/guide de demarrage.md",sourceDirName:".",slug:"/guide de demarrage",permalink:"/docs/guide de demarrage",draft:!1,editUrl:"https://github.com/PICO-MAZING/PICO_MAZING/tree/main/docs/guide de demarrage.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/introduction"},next:{title:"Creation du labyrinthe",permalink:"/docs/category/creation-du-labyrinthe"}},s={},u=[{value:"Mise en contexte",id:"mise-en-contexte",level:2},{value:"Raspberry Pi Pico W",id:"raspberry-pi-pico-w",level:3},{value:"Micro-ROS",id:"micro-ros",level:3},{value:"Configuration du PC",id:"configuration-du-pc",level:2},{value:"Installation de ROS2",id:"installation-de-ros2",level:3},{value:"Installation de micro-ROS",id:"installation-de-micro-ros",level:3},{value:"Configuration du Picobot",id:"configuration-du-picobot",level:2},{value:"Topic <code>picobot/sensors</code>",id:"topic-picobotsensors",level:3},{value:"Topic <code>picobot/cmd_vel</code>",id:"topic-picobotcmd_vel",level:3},{value:"Installation de l&#39;application micro-ROS",id:"installation-de-lapplication-micro-ros",level:3},{value:"Commandes de base",id:"commandes-de-base",level:2},{value:"T\xe9l\xe9op\xe9ration",id:"t\xe9l\xe9op\xe9ration",level:3},{value:"Monitoring du robot",id:"monitoring-du-robot",level:3},{value:"Node <code>picobot_line_follower</code>",id:"node-picobot_line_follower",level:2},{value:"NODE <code>picobot_maze_solving</code>",id:"node-picobot_maze_solving",level:2}],p={toc:u},c="wrapper";function d(e){let{components:t,...r}=e;return(0,n.kt)(c,(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"guide-de-d\xe9marrage-rapide"},"Guide de d\xe9marrage rapide"),(0,n.kt)("p",null,"Dans cette section nous nous attacherons \xe0 pr\xe9senter une marche \xe0 suivre afin de mettre en marche le Picobot. Pour suivre ce tutoriel, il faudra disposer d\u2019un ordinateur capable d\u2019installer ROS, nativement ou au travers d\u2019un conteneur."),(0,n.kt)("h2",{id:"mise-en-contexte"},"Mise en contexte"),(0,n.kt)("p",null,"Avant de commencer notre tutoriel, explicitons ce qui se cache derri\xe8re les termes que nous emploierons tout au long de ce guide.\nVous pouvez retoruver les diff\xe9rentes parties de ce guide dans le menu de gauche."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/labyrinthe/creation%20du%20labyrinthe"},"Labyrinthe")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/robot/Developpement"},"Robot")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/serveur/installation"},"Serveur")),(0,n.kt)("li",{parentName:"ul"},"(Algorithme de r\xe9solution) ",(0,n.kt)("a",{parentName:"li",href:"/docs/simulateur/developpement"},"Simulation"))),(0,n.kt)("h3",{id:"raspberry-pi-pico-w"},"Raspberry Pi Pico W"),(0,n.kt)("p",null,"Le Raspberry Pi Pico W est la version \xe9quip\xe9e du Wifi/BLE du c\xe9l\xe8bre microcontr\xf4leur Raspberry Pi Pico (2021) de la fondation Raspberry Pi. ",(0,n.kt)("a",{parentName:"p",href:"https://raspberry-pi.fr/raspberry-pi-pico-wifi/"},"Sorti en Juin 2022"),", le RPI PICO W accessible \xe0 partir de 8.40\u20ac est une option abordable et fiable pour entrer dans le monde de l'embarqu\xe9 et de l\u2019Internet des objets."),(0,n.kt)("h3",{id:"micro-ros"},"Micro-ROS"),(0,n.kt)("p",null,"Robot Operating System (ROS) est une plateforme libre de d\xe9veloppement logicielle pour robot. Dans sa premi\xe8re version, ROS ne permettait pas \xe0 l\u2019\xe9cosyst\xe8me d'interagir directement avec les microcontr\xf4leurs. Pour pallier ce d\xe9faut dans ROS2, le projet micro-ROS a vu le jour."),(0,n.kt)("p",null,"Micro-ROS est une surcouche du protocole DDS - utilis\xe9 dans ROS2 - pour les appareils \xe0 ressources limit\xe9es (microcontr\xf4leurs). Cette plateforme repose une infrastructure client/agent permettant une communication avec le r\xe9seau ROS aux syst\xe8mes \xe9quip\xe9s de microcontr\xf4leurs. L\u2019agent, nomm\xe9 \u2018micro-ros-agent\u2019 sert donc de passerelle entre ROS2 et les clients."),(0,n.kt)("p",null,"Plus de d\xe9tails sont disponibles sur le ",(0,n.kt)("a",{parentName:"p",href:"https://micro.ros.org/"},"le site de micro-ROS"),"."),(0,n.kt)("h2",{id:"configuration-du-pc"},"Configuration du PC"),(0,n.kt)("p",null,"Le Picobot a \xe9t\xe9 programm\xe9 sur la version humble de ROS2. Ce guide suivra donc les instructions sp\xe9cifiques correspondant \xe0 cette version de ROS2."),(0,n.kt)("h3",{id:"installation-de-ros2"},"Installation de ROS2"),(0,n.kt)("p",null,"Pour installer ROS2 - humble, veuillez vous r\xe9f\xe9rer aux instructions suivantes : ",(0,n.kt)("a",{parentName:"p",href:"https://docs.ros.org/en/humble/Installation.html"},"Installation ROS2 Humble")),(0,n.kt)("p",null,"Pour plus de flexibilit\xe9, notez qu\u2019il est possible d\u2019installer ROS2 au travers d\u2019un conteneur (LXD, docker). Consulter: ",(0,n.kt)("a",{parentName:"p",href:"https://ubuntu.com/blog/ros-development-with-lxd"},"ROS development with LXD"),", ",(0,n.kt)("a",{parentName:"p",href:"https://docs.ros.org/en/humble/How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html"},"Running ROS 2 nodes in Docker"),", ",(0,n.kt)("a",{parentName:"p",href:"http://wiki.ros.org/docker/Tutorials/Docker"},"ROS Docker")," et ",(0,n.kt)("a",{parentName:"p",href:"http://wiki.ros.org/docker/Tutorials/GUI"},"Docker GUI")," pour plus d\u2019informations."),(0,n.kt)("p",null,"Pour utiliser les applications graphiques de ROS depuis Docker, nous avons \xe9galement r\xe9dig\xe9 un succinct tutoriel r\xe9sumant les \xe9tapes n\xe9cessaires \xe0 la mise en place de l\u2019environnement: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/PICO-MAZING/ros_gui_docker"},"ROS GUI DOCKER"),"."),(0,n.kt)("h3",{id:"installation-de-micro-ros"},"Installation de micro-ROS"),(0,n.kt)("p",null,"Pour installer micro-ros, veuillez suivre les instructions suivantes : ",(0,n.kt)("a",{parentName:"p",href:"https://micro.ros.org/docs/tutorials/core/first_application_linux/"},"Installation micro-ros"),"."),(0,n.kt)("p",null,"\xc0 noter qu\u2019ici, il est important d\u2019installer l\u2019agent micro-ros, depuis ",(0,n.kt)("a",{parentName:"p",href:"https://micro.ros.org/docs/tutorials/core/first_application_linux/"},"l\u2019outil terminal fourni par micro-ros"),", par un conteneur ou via l\u2019utilitaire snap d\u2019Ubuntu via la commande:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"sudo snap install micro-ros-agent")),(0,n.kt)("h2",{id:"configuration-du-picobot"},"Configuration du Picobot"),(0,n.kt)("p",null,"Le Picobot est bas\xe9 sur un microcontr\xf4leur dont les ressources restent limit\xe9es. Plusieurs consid\xe9rations sont \xe0 prendre en compte avant de le mettre en marche. Le Picobot poss\xe8de une unique node nomm\xe9e ",(0,n.kt)("inlineCode",{parentName:"p"},"picobot_node"),". Cette node publie sur le topic ",(0,n.kt)("inlineCode",{parentName:"p"},"picobot/sensors")," et s\u2019abonne au topic ",(0,n.kt)("inlineCode",{parentName:"p"},"picobot/cmd_vel"),". Le robot communique avec le r\xe9seau ROS toutes les 100ms."),(0,n.kt)("h3",{id:"topic-picobotsensors"},"Topic ",(0,n.kt)("inlineCode",{parentName:"h3"},"picobot/sensors")),(0,n.kt)("p",null,"Tous les capteurs du Picobot renvoient des informations binaires (1 si activ\xe9, 0 sinon)."),(0,n.kt)("p",null,"Pour all\xe9ger au maximum la charge r\xe9seau du robot, les informations des 6 capteurs sont compact\xe9es dans un entier de 8 bits (0 - 63) repr\xe9sentant l\u2019ensemble des \xe9tats possibles."),(0,n.kt)("h3",{id:"topic-picobotcmd_vel"},"Topic ",(0,n.kt)("inlineCode",{parentName:"h3"},"picobot/cmd_vel")),(0,n.kt)("p",null,"En l\u2019\xe9tat, le Picobot r\xe9alise un nombre pr\xe9d\xe9fini de mouvements."),(0,n.kt)("p",null,"Chacun de ces mouvements est repr\xe9sent\xe9 dans une \xe9num\xe9ration ",(0,n.kt)("strong",{parentName:"p"},"action")," compos\xe9e des actions ",(0,n.kt)("strong",{parentName:"p"},"STOP : 0, FORWARD : 1, RIGHT : 2, BACKWARD : 3, LEFT : 4, DUCK_LEFT : 5, DUCK_RIGHT : 6"),"."),(0,n.kt)("p",null,"Les actions ",(0,n.kt)("strong",{parentName:"p"},"DUCK_LEFT")," et ",(0,n.kt)("strong",{parentName:"p"},"DUCK_RIGHT")," repr\xe9sentent respectivement le mouvement avant de la roue gauche et l\u2019arr\xeat de la roue droite, et le mouvement avant de la roue droite et l\u2019arr\xeat de la roue gauche."),(0,n.kt)("p",null,"Ces actions sont \xe0 diff\xe9rencier de ",(0,n.kt)("strong",{parentName:"p"},"LEFT")," et ",(0,n.kt)("strong",{parentName:"p"},"RIGHT")," repr\xe9sentant respectivement le mouvement avant de la roue gauche et arri\xe8re de la roue droite, et le mouvement avant de la roue droite et arri\xe8re de la roue gauche."),(0,n.kt)("p",null,"\xc0 la r\xe9ception d\u2019une commande sur le topic, le Picobot effectue l\u2019action associ\xe9e correspondant \xe0 une fonction impl\xe9ment\xe9e dans notre librairie ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/allantarcy/uros_pico_w/tree/master/librobot"},"librobot"),"."),(0,n.kt)("h3",{id:"installation-de-lapplication-micro-ros"},"Installation de l'application micro-ROS"),(0,n.kt)("p",null,"Pour configurer le robot, veuillez suivre les instructions disponibles sur notre r\xe9pertoire git : ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/allantarcy/uros_pico_w"},"micro-ros pico wifi")," (bien penser \xe0 entrer la bonne configuration internet dans le fichier pico_micro_ros_example.c)"),(0,n.kt)("h2",{id:"commandes-de-base"},"Commandes de base"),(0,n.kt)("p",null,"Pour connecter le Picobot \xe0 ROS2, bien penser \xe0 lancer l\u2019agent depuis le PC."),(0,n.kt)("p",null,"Depuis le paquet snap:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"micro-ros-agent udp4 --port 4444")),(0,n.kt)("p",null,"Depuis ROS2 (apr\xe8s avoir compil\xe9 la node. En cas de besoin, se r\xe9f\xe9rer \xe0 ce ",(0,n.kt)("a",{parentName:"p",href:"https://micro.ros.org/docs/tutorials/core/first_application_linux/"},"tutoriel"),"):"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"ros2 run micro_ros_agent micro_ros_agent udp4 --port 4444")),(0,n.kt)("p",null,"Depuis un conteneur Docker:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"docker run -it --rm -v /dev:/dev --privileged --net=host microros/micro-ros-agent:humble udp4 --port 4444")),(0,n.kt)("p",null,"(Bien penser \xe0 changer le num\xe9ro de port si n\xe9cessaire)"),(0,n.kt)("h3",{id:"t\xe9l\xe9op\xe9ration"},"T\xe9l\xe9op\xe9ration"),(0,n.kt)("p",null,"Pour commander le Picobot, nous avons impl\xe9ment\xe9 un utilitaire de t\xe9l\xe9op\xe9ration \xe0 partir du clavier, bas\xe9 sur le package ",(0,n.kt)("a",{parentName:"p",href:"http://wiki.ros.org/turtle_teleop"},"turtle_teleop")," de ROS."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"ros2 run picobot picobot_keyboard")),(0,n.kt)("h3",{id:"monitoring-du-robot"},"Monitoring du robot"),(0,n.kt)("p",null,"Pour observer la configuration actuelle des capteurs et les commandes en direction du robot lancer la node ",(0,n.kt)("inlineCode",{parentName:"p"},"picobot_listener")," avec la commande suivante:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"ros2 run picobot picobot_listener")),(0,n.kt)("p",null,"Vous pouvez \xe9galement monitorer l\u2019ensemble des topics depuis ",(0,n.kt)("inlineCode",{parentName:"p"},"rqt"),"."),(0,n.kt)("p",null,"Lancer la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"rqt"),". Si le \u201cTopic Monitor\u201d ne s\u2019affiche pas, le d\xe9marrer en s\xe9lectionnant l\u2019onglet ",(0,n.kt)("inlineCode",{parentName:"p"},"Plugins -> Topics -> Topic Monitor"),"."),(0,n.kt)("h2",{id:"node-picobot_line_follower"},"Node ",(0,n.kt)("inlineCode",{parentName:"h2"},"picobot_line_follower")),(0,n.kt)("p",null,"Cette node pose les fondements du parcours du Picobot dans le labyrinthe et expose un exemple de r\xe9solution \xe0 partir de la strat\xe9gie \u201ctribord\u201d selon laquelle le robot tourne \xe0 droite d\xe8s que possible. Ici, on s\u2019attache \xe0 suivre une ligne jusqu\u2019\xe0 se retrouver au centre d\u2019une case depuis laquelle on d\xe9cidera de la marche \xe0 suivre (tourner \xe0 droite si possible, avancer sinon, tourner \xe0 gauche, ...). Pour lancer cette node, placer le robot dans le labyrinthe puis taper la commande suivante:"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"ros2 run picobot picobot_line_follower")),(0,n.kt)("h2",{id:"node-picobot_maze_solving"},"NODE ",(0,n.kt)("inlineCode",{parentName:"h2"},"picobot_maze_solving")),(0,n.kt)("p",null,"Cette node n\u2019a pas \xe9t\xe9 impl\xe9ment\xe9e. Ici, il faudrait r\xe9impl\xe9menter la partie r\xe9solution du labyrinthe de simulateur. Cette node nous permettrait de r\xe9soudre des labyrinthes en sp\xe9cifiant leur taille, le nombre de robots \xe0 inclure dans la r\xe9solution et le type d\u2019algorithme  de r\xe9solution; et de r\xe9cup\xe9rer la position des robots en temps r\xe9el."))}d.isMDXComponent=!0}}]);